<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ninja Sief Adventure</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a2a6c; touch-action: none; font-family: sans-serif; }
        canvas { display: block; background: linear-gradient(#1a2a6c, #b21f1f, #fdbb2d); width: 100vw; height: 100vh; }
        .score { position: absolute; top: 20px; left: 20px; color: white; font-size: 24px; text-shadow: 2px 2px #000; z-index: 10; }
        .controls { position: fixed; bottom: 30px; width: 100%; display: flex; justify-content: space-around; z-index: 20; }
        .btn { width: 70px; height: 70px; background: rgba(255, 255, 255, 0.2); border: 2px solid white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; color: white; backdrop-filter: blur(5px); }
        .btn:active { background: rgba(255, 255, 255, 0.5); }
    </style>
</head>
<body>

    <div class="score">المسافة: <span id="meters">0</span>m</div>
    <canvas id="gameCanvas"></canvas>

    <div class="controls">
        <div style="display: flex; gap: 15px;">
            <div class="btn" id="lBtn">←</div>
            <div class="btn" id="rBtn">→</div>
        </div>
        <div class="btn" id="jBtn" style="border-color: #ffde59;">↑</div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let player = {
            x: 50, y: 0, w: 40, h: 60,
            dy: 0, jumpForce: 18, gravity: 0.8,
            grounded: false, vx: 0, speed: 7,
            legAngle: 0 // حركة الرجلين
        };

        function drawNinja(x, y) {
            // الرأس والقناع
            ctx.fillStyle = "black";
            ctx.beginPath(); ctx.arc(x + 20, y + 10, 12, 0, Math.PI*2); ctx.fill();
            ctx.fillStyle = "white"; // العين
            ctx.fillRect(x + 25, y + 5, 8, 3);
            // الجسم
            ctx.fillStyle = "black";
            ctx.fillRect(x + 10, y + 22, 20, 25);
            ctx.fillStyle = "#e74c3c"; // الحزام
            ctx.fillRect(x + 8, y + 35, 24, 5);
            // حركة الرجلين (Animation)
            ctx.fillStyle = "black";
            let legMove = Math.sin(player.legAngle) * 10;
            if (player.vx === 0) legMove = 0;
            ctx.fillRect(x + 10, y + 47, 8, 10 + legMove); // رجل 1
            ctx.fillRect(x + 22, y + 47, 8, 10 - legMove); // رجل 2
        }

        function update() {
            player.dy += player.gravity;
            player.y += player.dy;
            player.x += player.vx;
            if (player.vx !== 0) player.legAngle += 0.2;

            if (player.y + player.h > canvas.height - 50) {
                player.y = canvas.height - 50 - player.h;
                player.dy = 0;
                player.grounded = true;
            }
            document.getElementById('meters').innerText = Math.floor(player.x);
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // أرضية
            ctx.fillStyle = "#34495e";
            ctx.fillRect(0, canvas.height - 50, canvas.width, 50);
            drawNinja(player.x, player.y);
            update();
            requestAnimationFrame(animate);
        }

        document.getElementById('lBtn').ontouchstart = () => player.vx = -player.speed;
        document.getElementById('rBtn').ontouchstart = () => player.vx = player.speed;
        document.getElementById('lBtn').ontouchend = document.getElementById('rBtn').ontouchend = () => player.vx = 0;
        document.getElementById('jBtn').ontouchstart = () => { if(player.grounded) player.dy = -player.jumpForce; };

        animate();
    </script>
</body>
</html>
